<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TheSoundOf</title>
    <style>
        .sound-circle img {
            transition: transform 0.25s cubic-bezier(.4,0,.2,1);
        }
        .sound-circle:hover img {
            transform: rotate(-10deg) scale(1.04);
        }
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        body {
            min-height: 100vh;
            min-width: 100vw;
            background: url('bg.jpg') no-repeat center center fixed;
            background-size: cover;
            filter: grayscale(100%);
            overflow: hidden;
        }
        /* Overlay to ensure grayscale applies to background only */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: inherit;
            background-size: cover;
            filter: grayscale(100%);
            z-index: 0;
        }
        #grain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 2;
            opacity: 0.18;
            mix-blend-mode: overlay;
        }
        .center-logo {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 3;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100vw;
            height: 100vh;
            pointer-events: auto;
        }
        .center-logo img {
            width: 260px;
            height: 260px;
            display: block;
            filter: drop-shadow(0 2px 8px rgba(0,0,0,0.18));
            pointer-events: auto;
            cursor: pointer;
            position: absolute;
            top: 0;
            left: 0;
            transition: opacity 0.35s cubic-bezier(.4,0,.2,1);
        }
        .center-logo {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 3;
            width: 260px;
            height: 260px;
            pointer-events: none;
            display: block;
        }
        .center-logo img {
            position: absolute;
            top: 0;
            left: 0;
            width: 260px;
            height: 260px;
            display: block;
            filter: drop-shadow(0 2px 8px rgba(0,0,0,0.18));
            pointer-events: auto;
            transition: opacity 0.35s cubic-bezier(.4,0,.2,1);
        }
        .center-logo .logo2 {
            opacity: 0;
        }
        .center-logo:hover .logo1 {
            opacity: 0;
        }
        .center-logo:hover .logo2 {
            opacity: 1;
        }
        }
    </style>
</head>
<body>
    <div class="center-logo" id="logo-container">
    <img src="logo.svg" alt="Logo" class="logo1" />
    <img src="logo2.svg" alt="Logo Hover" class="logo2" />
    </div>
        <div class="corner-info-text">(THE SOUND OF) is a digital soundscape that explores the domestic audio environment of an Indian household.</div>
    <audio id="goa-audio" src="goa nature.mp3 [275557].mp3" preload="auto"></audio>
    <div id="sound-circles" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; z-index:4; pointer-events:none;"></div>
    <canvas id="grain"></canvas>
    <style>
        .corner-info-text {
            position: fixed;
            right: 2vw;
            bottom: 2vh;
            z-index: 100;
            color: #fff;
            font-family: 'Arial', Arial, sans-serif;
            font-size: 1.05rem;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            background: none;
            padding: 12px 18px;
            border-radius: 0;
            box-shadow: none;
            pointer-events: none;
            text-align: right;
            width: auto;
            max-width: 40vw;
            line-height: 1.3;
        }
    </style>
    <script>

    // --- Sound files for circles ---
    const soundFiles = [
    'downloads/BR_035_India_Puja.mp3 [578751].mp3',
    'downloads/106731_1630399-lq.mp3',
    'downloads/175386_828209-lq.mp3',
    'downloads/188883_3370987-lq.mp3',
    'downloads/201645_828209-lq.mp3',
    'downloads/253759_1358383-lq.mp3',
    'downloads/267516_5005641-lq.mp3',
    'downloads/india small street [423509].mp3',
    'downloads/106730_1630399-lq.mp3',
    'downloads/GAS COOKER - 2 [455372].mp3',
    'downloads/392575_7070442-lq.mp3',
    'downloads/438910_739478-lq.mp3',
    ];


    // --- Logo click: show circles and toggle Goa sound ---
    let circlesShown = false;
    document.getElementById('logo-container').addEventListener('click', function(e) {
        var goaAudio = document.getElementById('goa-audio');
        if (!circlesShown) {
            // First click: show circles and play Goa sound
            document.getElementById('sound-circles').style.display = 'block';
            renderSoundCircles();
            circlesShown = true;
            goaAudio.currentTime = 0;
            goaAudio.play();
        } else {
            // If circles are active: close circles, stop all sounds, reset
            document.getElementById('sound-circles').style.display = 'none';
            circlesShown = false;
            // Stop all circle sounds
            if (window.circleAudios) {
                window.circleAudios.forEach(function(a) {
                    a.pause();
                    a.currentTime = 0;
                });
            }
            // Stop Goa sound
            goaAudio.pause();
            goaAudio.currentTime = 0;
        }
        e.stopPropagation();
    });

    // --- Render 12 circles ---
    function renderSoundCircles() {
    const container = document.getElementById('sound-circles');
    container.innerHTML = '';
    container.style.pointerEvents = 'none';
        const w = window.innerWidth;
        const h = window.innerHeight;
        const radius = Math.min(w, h) * 0.32;
        const cx = w/2, cy = h/2;
        // Store audio elements for layering
        window.circleAudios = [];
        for (let i = 0; i < 12; i++) {
            const angle = (i / 12) * 2 * Math.PI - Math.PI/2;
            const x = cx + radius * Math.cos(angle) - 60;
            const y = cy + radius * Math.sin(angle) - 60;
        const circle = document.createElement('div');
        circle.className = 'sound-circle';
        circle.style.pointerEvents = 'auto';
        circle.style.position = 'absolute';
        circle.style.left = (x - 10) + 'px';
        circle.style.top = (y - 10) + 'px';
        circle.style.width = '140px';
        circle.style.height = '140px';
        circle.style.borderRadius = '50%';
        circle.style.background = 'none';
        circle.style.display = 'block';
        circle.style.cursor = 'pointer';
        circle.style.zIndex = 5;
        circle.setAttribute('data-index', i);
    // Add a different image for each circle
        const img = document.createElement('img');
        if (i === 0) {
            img.src = 'image.png';
        } else {
            img.src = `image ${28 + i}.png`;
        }
        img.alt = 'Sound Circle';
        img.style.width = '140px';
        img.style.height = '140px';
        img.style.borderRadius = '50%';
        img.style.display = 'block';
        img.style.objectFit = 'cover';
        img.style.pointerEvents = 'none';
        img.style.position = 'absolute';
        img.style.top = '0';
        img.style.left = '0';
        circle.appendChild(img);
        // SVG for animated progress
        const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
        svg.setAttribute('width', '140');
        svg.setAttribute('height', '140');
        svg.style.position = 'absolute';
        svg.style.top = '0';
        svg.style.left = '0';
        svg.style.pointerEvents = 'none';
        svg.style.display = 'none';
        // Progress circle
        const progress = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        progress.setAttribute('cx', '70');
        progress.setAttribute('cy', '70');
        progress.setAttribute('r', '66');
        progress.setAttribute('fill', 'none');
        progress.setAttribute('stroke', '#00e6e6');
        progress.setAttribute('stroke-width', '4');
        progress.setAttribute('stroke-dasharray', 2 * Math.PI * 66);
        progress.setAttribute('stroke-dashoffset', 2 * Math.PI * 66);
        progress.style.transition = 'stroke-dashoffset 0.1s linear';
        svg.appendChild(progress);
        circle.appendChild(svg);
            // Audio element
            const audio = new Audio(soundFiles[i]);
            audio.preload = 'auto';
            window.circleAudios.push(audio);
            // Click handler
            circle.addEventListener('click', function(e) {
                e.stopPropagation();
                if (!audio.paused && !audio.ended) {
                    audio.pause();
                    audio.currentTime = 0;
                    progress.setAttribute('stroke-dashoffset', 2 * Math.PI * 66);
                    svg.style.display = 'none';
                } else {
                    audio.currentTime = 0;
                    audio.play();
                    svg.style.display = 'block';
                    animateProgress(audio, progress, svg);
                }
            });
            // Reset progress when done
            audio.addEventListener('ended', function() {
                progress.setAttribute('stroke-dashoffset', 2 * Math.PI * 56);
            });
            container.appendChild(circle);
        }
    }

    // Animate progress for a playing audio
    function animateProgress(audio, progress) {
        const total = audio.duration || 1;
        const svg = progress.parentNode;
        function step() {
            if (!audio.paused && !audio.ended) {
                const frac = audio.currentTime / total;
                const offset = (1 - frac) * 2 * Math.PI * 66;
                progress.setAttribute('stroke-dashoffset', offset);
                requestAnimationFrame(step);
            } else {
                progress.setAttribute('stroke-dashoffset', 2 * Math.PI * 66);
                if (svg) svg.style.display = 'none';
            }
        }
        step();
    }

    window.addEventListener('resize', function() {
        if(document.getElementById('sound-circles').style.display === 'block') {
            renderSoundCircles();
        }
    });

    // Grain/Noise animation
    const canvas = document.getElementById('grain');
    const ctx = canvas.getContext('2d');

    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    function drawGrain() {
        const w = canvas.width;
        const h = canvas.height;
        const imageData = ctx.createImageData(w, h);
        const buffer32 = new Uint32Array(imageData.data.buffer);
        for (let i = 0; i < buffer32.length; i++) {
            // Subtle random grayscale noise
            const shade = Math.floor(Math.random() * 60 + 240); // 180-240
            buffer32[i] = (255 << 24) | (shade << 16) | (shade << 8) | shade;
        }
        ctx.putImageData(imageData, 0, 0);
    }

    function animate() {
        drawGrain();
        requestAnimationFrame(animate);
    }
    animate();
    </script>
</body>
</html>
